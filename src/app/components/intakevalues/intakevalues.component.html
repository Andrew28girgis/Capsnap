<ngx-spinner bdColor="rgba(0, 0, 0, 0.9)" size="medium" color="#fff" type="square-jelly-box" [fullScreen]="true">
    <p style="font-size: 20px; color: white">Loading...</p>
</ngx-spinner>


<div class="container-fluid" style="padding: 2px 15px; background-color: #f7f7f7;">
    <div class="row" *ngIf="!noIntakeValues" style="padding-bottom: 20px;">
        <div class="col-md-3" *ngIf="!GeneralIntake.ChangePath" >
            <div class="d-flex text-white">
                <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start"
                    id="menu">
                    <ng-container *ngIf="inTakeForm">
                        <div class="poplinks">
                        <li class="nav-item " style="cursor: pointer;"
                            *ngFor="let group of inTakeForm.groups" class="active-nav"
                            [ngClass]="{'active-nav': clickedIndex == group.id}"
                            (click)="clickedIndex = group.id">
                            <ng-container *ngIf="!GeneralIntake.ChangePath">
                                <a (click)="SetActiveGroup(group);" class="nav-link "
                                    *ngIf="group.displayOrder!= 0 "
                                    style="padding: 10px 3px; font-size: 19px;">
                                    <i class="fs-4 bi-house"></i> <span class=" nav-i ">
                                        {{group.name}}
                                        <i class="fas fa-check-circle" *ngIf="group.completed == 1"
                                            style="margin-left: 5px; color: #2ecc71; font-size: 15px;"></i>
                                        <i class="far fa-times-circle" *ngIf="group.completed == 0"
                                            style="margin-left: 5px; color: #f82249; font-size: 15px;"></i>
                                    </span>
                                </a>
                            </ng-container>
                            <ng-container *ngIf="GeneralIntake.ChangePath">
                                <h6 (click)="SetActiveGroup(group);" class="nav-link "
                                    *ngIf="group.displayOrder!= 0 "
                                    style="padding: 10px 3px; cursor: auto;">
                                    <i class="fs-4 bi-house"></i> <span class=" nav-i ">
                                        {{group.name}}
                                        <i class="far fa-check-circle" *ngIf="group.completed == 1"
                                            style="margin-left: 5px; color: #2ecc71; font-size: 15px;"></i>
                                        <i class="far fa-times-circle" *ngIf="group.completed == 0"
                                            style="margin-left: 5px; color: #f82249; font-size: 15px;"></i>
                                    </span>
                                </h6>
                            </ng-container>

                        </li>

                    </div>

                        <!-- <li class="active-nav" style="cursor: pointer;" (click)="clickedIndex = 1996"
                            [ngClass]="{'active-nav': clickedIndex == 1996}">
                            <a class="nav-link" (click)="ShowAttachments()" style="padding: 10px 3px; font-size: 19px;">
                                <i class="fs-4 bi-house"></i> <span class="nav-i">Project Documents
                                     <i class="far fa-times-circle" *ngIf="uploadFile"
                                    style="margin-left: 5px; color: #f82249; font-size: 15px;"></i>
                                </span>
                            </a>
                        </li>

                        <li class="active-nav" style="cursor: pointer;"  (click)="clickedIndex = 1997"
                            [ngClass]="{'active-nav': clickedIndex == 1997}">
                            <a class="nav-link" (click)="ShowPic()" style="padding: 10px 3px; font-size: 19px;">
                                <i class="fs-4 bi-house"></i> <span class="nav-i">Images</span>
                            </a>
                        </li> -->
                    </ng-container>
                </ul>
                <hr>
            </div>
        </div>

        <div class="col-9 py-3" *ngIf="inTakeForm && !showAttach && !showPictures && !GeneralIntake.ChangePath">
            <h1 style="letter-spacing: 2px; text-align: center; font-size: 36px; font-weight: 500;">{{GetActiveGroup()?.name}}</h1>
            <div class="line mb-5"> <span class="divider-center"></span> </div>
            <ng-container *ngFor="let screen of GetActiveGroup()?.screens">
                <ng-container *ngFor="let container of screen.containers">
                    <ng-container [ngSwitch]="container.type">
                        <div  class="col-md-6" style="margin: auto;">
                            <ng-container *ngSwitchCase="'Form'">
                                <ng-container *ngFor="let item of container.items">
                                    <ng-container *ngIf="item.itemValue!=null">
                                        <ng-container [ngSwitch]="item.type">

                                            <ng-container *ngSwitchCase="'Icons'">
                                                <div class="inp-container type-con" >
                                                    <label class="label-text"> {{item.displayName}}</label>
                                                  
                                                    <select class="form-select w-100"
                                                        name="{{item.name}}"
                                                        aria-label="Default select example"  (change)="GetItemValue($event , item)"
                                                        style="padding: 6px 5px;">
                                                        <ng-container *ngFor="let option of item.itemOptions">
                                                            <ng-container *ngIf="item.itemValue == option.id">
                                                                <option value="{{option.id}}" selected>
                                                                    {{option.displayName}}</option>
                                                            </ng-container>
                                                            <ng-container *ngIf="item.itemValue!=option.id">
                                                                <option value="{{option.id}}">
                                                                    {{option.displayName}}</option>
                                                            </ng-container>
                                                        </ng-container>
                                                    </select>
                                              
                                                </div>
                                            </ng-container>

                                            <ng-container *ngSwitchCase="'Text'">
                                                <div class="type-con">
                                                    <div style="display: flex; ">
                                                        <input style="margin: 4px 5px 0 0;" type="checkbox" id="Deal" value="Deal" name="GroupId"  
                                                        (change)="checkItem($event ,item)"
                                                        [checked]="item.required == 1" >

                                                        <label class="label-text"> {{item.displayName}}</label>
                                                    </div>
                                                    
                                                 <input class="form-control inp-text " type="text"
                                                    [ngClass]="{'required': item.required == 1}"
                                                    name="{{item.name}}" [(ngModel)]="item.itemValue">
                                                    <input class="form-control inp-text" type="text" name="{{item.message}}" 
                                                    [(ngModel)]="item.message" style=" margin-bottom: 7px;" placeholder="Enter Message here">
                                                <div
                                                    style="display: flex; display: flex;justify-content:flex-end;margin-top: 2px;">
                                                    <p *ngIf="item.required == 1" style="color: #ef233c;">
                                                        Please fill out this field</p>
                                                    <p *ngIf="item.message!='' && item.message!=null">
                                                        <i class="fas fa-info-circle" style="cursor: pointer;
                                                          font-size: 23px; margin-top: 1px; color: #8a8e91;"
                                                            (click)="showMessage(item)"></i>
                                                   
                                                    </p>

                                                </div>
                                                <div *ngIf="item.showMessage">
                                                    <div class="card card-body mb-3"> {{item.message}}</div>
                                                </div>
                                                </div>
                                            </ng-container>


                                            <ng-container *ngSwitchCase="'Address'">
                                                <!-- <div style="margin: 15px 0  20px 0;"
                                                    *ngIf="lat!=null||lng!=null">
                                                    <agm-map [latitude]="lat" [longitude]="lng"
                                                        [zoom]="zoom">
                                                        <agm-map [latitude]="lat" [longitude]="lng">
                                                        </agm-map>
                                                    </agm-map>
                                                </div> -->
                                                <div class="type-con">
                                                    <div style="display: flex;">
                                                        <input style="margin: 4px 5px 0 0;" 
                                                        type="checkbox" id="Deal" value="Deal" name="GroupId"  
                                                        (change)="checkItem($event ,item)"
                                                        [checked]="item.required == 1" >
                                                        <label class="label-text"> {{item.displayName}}</label>
                                                    </div>
                                                
                                                <input class="form-control inp-text " type="text"
                                                    [ngClass]="{'required': item.required == 1}"
                                                    name="{{item.name}}" [(ngModel)]="item.itemValue"
                                                    >
                                                    <input class="form-control inp-text" type="text" name="{{item.message}}" 
                                                    [(ngModel)]="item.message" style=" margin-bottom: 7px;" placeholder="Enter Message here">
                                                    <!-- ngx-google-places-autocomplete [options]='options'
                                                    #placesRef="ngx-places"
                                                    (onAddressChange)="handleAddressChange($event)" -->
                                                <div
                                                    style="display: flex; display: flex;justify-content: flex-end;margin-top: 2px;">
                                                    <p *ngIf="item.required == 1" style="color: #ef233c;">
                                                        Please fill out this field</p>
                                                    <p *ngIf="item.message!='' && item.message!=null">
                                                        <i class="fas fa-info-circle" style="cursor: pointer;
                                                        font-size: 23px; margin-top: 1px; color: #8a8e91;"
                                                            (click)="showMessage(item)"></i>

                                                    </p>
                                                    <div *ngIf="item.showMessage">
                                                        <div class="card card-body mb-3"> {{item.message}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            </ng-container>

                                            <ng-container *ngSwitchCase="'State'">
                                                <div class="type-con">
                                                    <div style="display: flex;">
                                                        <input style="margin: 4px 5px 0 0;" type="checkbox" id="Deal" value="Deal" name="GroupId"  
                                                        (change)="checkItem($event ,item)" 
                                                        [checked]="item.required == 1">
                                                        <label class="label-text"> {{item.displayName}}</label>
                                                 
                                                       
                                                    </div>
                                       
                                                <input class="form-control inp-text " type="text"
                                                    [ngClass]="{'required': item.required == 1}"
                                                    name="{{item.name}}" [(ngModel)]="item.itemValue">
                                                    <input class="form-control inp-text" type="text" name="{{item.message}}" 
                                                    [(ngModel)]="item.message" style=" margin-bottom: 7px;" placeholder="Enter Message here">
                                                <div
                                                    style="display: flex; display: flex;justify-content: flex-end;margin-top: 2px;">
                                                    <p *ngIf="item.required == 1" style="color: #ef233c;">
                                                        Please fill out this field</p>
                                                    <p *ngIf="item.message!='' && item.message!=null">
                                                        <i class="fas fa-info-circle" style="cursor: pointer;
                                                        font-size: 23px; margin-top: 1px; color: #8a8e91;"
                                                            (click)="showMessage(item)"></i>
                                                    </p>
                                                    <div *ngIf="item.showMessage">
                                                        <div class="card card-body mb-3"> {{item.message}}
                                                        </div>
                                                    </div>
                                                </div>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngSwitchCase="'City'">
                                                <div class="type-con">
                                                    <div style="display: flex;">
                                                        <input style="margin: 4px 5px 0 0;" type="checkbox" id="Deal" value="Deal" name="GroupId"  
                                                        (change)="checkItem($event ,item)" 
                                                        [checked]="item.required == 1">
                                                        <label class="label-text"> {{item.displayName}}</label>
                                                    </div>
                                   
                                                <input class="form-control inp-text " type="text"
                                                    [ngClass]="{'required': item.required == 1}"
                                                    name="{{item.name}}" [(ngModel)]="item.itemValue">
                                                    <input class="form-control inp-text" type="text" name="{{item.message}}" 
                                                    [(ngModel)]="item.message" style=" margin-bottom: 7px;" placeholder="Enter Message here">
                                                <div
                                                    style="display: flex; display: flex;justify-content: flex-end;margin-top: 2px;">
                                                    <p *ngIf="item.required == 1" style="color: #ef233c;">
                                                        Please fill out this field</p>
                                                    <p *ngIf="item.message!='' && item.message!=null">
                                                        <i class="fas fa-info-circle" style="cursor: pointer;
                                                        font-size: 23px; margin-top: 1px; color: #8a8e91;"
                                                            (click)="showMessage(item)"></i>
                                                    </p>

                                                </div>
                                                <div *ngIf="item.showMessage">
                                                    <div class="card card-body mb-3"> {{item.message}}</div>
                                                </div>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngSwitchCase="'Zip'">
                                                <div class="type-con">
                                                    <div style="display: flex;">
                                                        <input style="margin: 4px 5px 0 0;" type="checkbox" id="Deal" value="Deal" name="GroupId"  
                                                        (change)="checkItem($event ,item)" 
                                                        [checked]="item.required == 1">
                                                        <label class="label-text"> {{item.displayName}}</label>
                                                    </div>
                                                 
                                                <input class="form-control inp-text " type="text"
                                                    [ngClass]="{'required': item.required == 1}"
                                                    name="{{item.name}}" [(ngModel)]="item.itemValue">
                                                    <input class="form-control inp-text" type="text" name="{{item.message}}" 
                                                    [(ngModel)]="item.message" style=" margin-bottom: 7px;" placeholder="Enter Message here">
                                                <div
                                                    style="display: flex; display: flex;justify-content: flex-end;margin-top: -1px;">
                                                    <p *ngIf="item.required == 1" style="color: #ef233c;">
                                                        Please fill out this field</p>
                                                    <p *ngIf="item.message!='' && item.message!=null">
                                                        <i class="fas fa-info-circle" style="cursor: pointer;
                                                        font-size: 23px; margin-top: 1px; color: #8a8e91;"
                                                            (click)="showMessage(item)"></i>
                                                    </p>

                                                </div>
                                                <div *ngIf="item.showMessage">
                                                    <div class="card card-body mb-3"> {{item.message}}</div>
                                                </div>
                                                </div>
                                            </ng-container>


                                            <ng-container *ngSwitchCase="'TextArea'">
                                                <div class="type-con">
                                                    <div style="display: flex;">
                                                        <input style="margin: 4px 5px 0 0;" type="checkbox" id="Deal" value="Deal" name="GroupId"  
                                                        (change)="checkItem($event ,item)" 
                                                        [checked]="item.required == 1">
                                                        <label class="label-text"> {{item.displayName}}</label>
                                                      
                                                     
                                                    </div>
                                             
                                                <textarea class="form-control"
                                                    style="   margin: 0 4px 20px 0;"
                                                    [ngClass]="{'required': item.required == 1}"
                                                    name="{{item.name}}" rows="8"
                                                    [(ngModel)]="item.itemValue">
                                                </textarea>
                                                <input class="form-control inp-text" type="text" name="{{item.message}}" 
                                                [(ngModel)]="item.message" style=" margin-bottom: 7px;" placeholder="Enter Message here">
                                                <div
                                                    style="display: flex; display: flex;justify-content: flex-end;margin-top: -1px;">
                                                    <p *ngIf="item.required == 1" style="color: #ef233c;">
                                                        Please fill out this field</p>
                                                    <p *ngIf="item.message!='' && item.message!=null">
                                                        <i class="fas fa-info-circle" style="cursor: pointer;
                                                        font-size: 23px; margin-top: 1px; color: #8a8e91;"
                                                            (click)="showMessage(item)"></i>
                                                    </p>

                                                </div>
                                                <div *ngIf="item.showMessage">
                                                    <div class="card card-body mb-3"> {{item.message}}</div>
                                                </div>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngSwitchCase="'Money'">
                                                <div class="type-con">
                                                <div class="dollar">
                                                    <div style="display: flex;">
                                                        <input style="margin: 4px 5px 0 0;" type="checkbox" id="Deal" value="Deal" name="GroupId"  
                                                        (change)="checkItem($event ,item)" 
                                                        [checked]="item.required == 1">
                                                        <label class="label-text"> {{item.displayName}}</label>
                                                 
                                                        
                                                 
                                                    </div>
                                   
                                                    <input type="text" class="form-control inp-text"
                                                        [ngClass]="{'required': item.required == 1}"
                                                        name="{{item.name}}" (keydown)="numberCheck($event)"
                                                        (keyup)="CommaFormatted($event ,item);getTotal(container)"
                                                        [(ngModel)]="item.itemValue" />
                                                        <input class="form-control inp-text" type="text" name="{{item.message}}" 
                                                        [(ngModel)]="item.message" style=" margin-bottom: 7px;" placeholder="Enter Message here">
                                                    <div
                                                        style="display: flex; display: flex;justify-content: flex-end;margin-top: -1px;">
                                                        <p *ngIf="item.required == 1"
                                                            style="color: #ef233c;">Please fill out this
                                                            field</p>
                                                        <p *ngIf="item.message!='' && item.message!=null">
                                                            <i class="fas fa-info-circle" style="cursor: pointer;
                                                    font-size: 23px; margin-top: 1px; color: #8a8e91;"
                                                                (click)="showMessage(item)"></i>
                                                        </p>
                                                    </div>
                                                    <div *ngIf="item.showMessage">
                                                        <div class="card card-body mb-3"> {{item.message}}
                                                        </div>
                                                    </div>
                                                </div>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngSwitchCase="'NegativeMoney'">
                                                <div class="type-con">
                                                <div class="dollar">
                                                    <div style="display: flex;">
                                                        <input style="margin: 4px 5px 0 0;" type="checkbox" id="Deal" value="Deal" name="GroupId"  
                                                        (change)="checkItem($event ,item)"
                                                        [checked]="item.required == 1" >
                                                        <label class="label-text"> {{item.displayName}}</label>
                                           
                                                        
                                                      
                                                    </div>
                                              
                                                    <input type="text" class="form-control inp-text"
                                                        [ngClass]="{'required': item.required == 1}"
                                                        name="{{item.name}}" (keydown)="numberCheck($event)"
                                                        (keyup)="CommaFormatted($event ,item);getTotal(container)"
                                                        [(ngModel)]="item.itemValue" />
                                                        <input class="form-control inp-text" type="text" name="{{item.message}}" 
                                                        [(ngModel)]="item.message" style=" margin-bottom: 7px;" placeholder="Enter Message here">
                                                    <div
                                                        style="display: flex; display: flex;justify-content: flex-end;margin-top: -1px;">
                                                        <p *ngIf="item.required == 1"
                                                            style="color: #ef233c;">Please fill out this
                                                            field</p>
                                                        <p *ngIf="item.message!='' && item.message!=null">
                                                            <i class="fas fa-info-circle" style="cursor: pointer;
                                                        font-size: 23px; margin-top: 1px; color: #8a8e91;"
                                                                (click)="showMessage(item)"></i>
                                                        </p>

                                                    </div>
                                                    <div *ngIf="item.showMessage">
                                                        <div class="card card-body mb-3"> {{item.message}}
                                                        </div>
                                                    </div>
                                                </div>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngSwitchCase="'Number'">
                                                <div class="type-con">
                                                    <div style="display: flex;">
                                                        <input style="margin: 4px 5px 0 0;" type="checkbox" id="Deal" value="Deal" name="GroupId"  
                                                        (change)="checkItem($event ,item)"
                                                        [checked]="item.required == 1" >
                                                        <label class="label-text"> {{item.displayName}}</label>
                                                    
                                                    </div>
                                     
                                                <input class="form-control inp-text" type="text"
                                                    [ngClass]="{'required': item.required == 1}"
                                                    name="{{item.name}}" (keydown)="numberCheck($event)"
                                                    (keyup)="CommaFormatted($event ,item)"
                                                    [(ngModel)]="item.itemValue" />
                                                    <input class="form-control inp-text" type="text" name="{{item.message}}" 
                                                    [(ngModel)]="item.message" style=" margin-bottom: 7px;" placeholder="Enter Message here">
                                                <div
                                                    style="display: flex; display: flex;justify-content: flex-end;margin-top: -1px;">
                                                    <p *ngIf="item.required == 1" style="color: #ef233c;">
                                                        Please fill out this field</p>
                                                    <p *ngIf="item.message!='' && item.message!=null">
                                                        <i class="fas fa-info-circle"
                                                            style="cursor: pointer;
                                                            font-size: 23px; margin-top: 1px; color: #8a8e91;"
                                                            (click)="showMessage(item)"></i>
                                                    </p>

                                                </div>
                                                <div *ngIf="item.showMessage">
                                                    <div class="card card-body"> {{item.message}}</div>
                                                </div>
                                            </div>
                                            </ng-container>

                                            <ng-container *ngSwitchCase="'SumLabel'">
                                                <label class="sum-title"
                                                    style="margin-left: 1px; margin-top: 20px; font-weight: 500; font-size: 19px; ">
                                                    {{item.displayName}}
                                                    <span  style="color: #000;font-weight: 200;">
                                                        {{ item.itemValue | number}}</span>
                                                    <span
                                                        style="color: #000;font-weight: 200;"
                                                        *ngIf="item.itemValue == null"> 0</span></label>
                                            </ng-container>

                                            <ng-container *ngSwitchCase="'DropDown'">
                                                <div class="inp-container type-con">
                                                    <label class="label-text"> {{item.displayName}}</label>
                                                  
                                                    <select class="w-100" name="{{item.name}}"
                                                        aria-label="Default select example"
                                                        (change)="GetItemValue($event , item)"
                                                        style="padding: 6px 5px;">
                                                        <ng-container *ngFor="let option of item.itemOptions">
                                                            <ng-container
                                                                *ngIf="item.itemValue==option.value">
                                                                <option value="{{option.value}}" selected>
                                                                    {{option.displayName}}</option>
                                                            </ng-container>
                                                            <ng-container
                                                                *ngIf="item.itemValue!=option.value">
                                                                <option value="{{option.value}}">
                                                                    {{option.displayName}}</option>
                                                            </ng-container>
                                                        </ng-container>
                                                    </select>
                                                
                                                </div>
                                            </ng-container>

                                        </ng-container>
                                    </ng-container>
                                </ng-container>
                            </ng-container>
                            <ng-container *ngSwitchCase="'DynamicChild'">
                                <ng-container *ngFor="let item of container.items">
                                    <ng-container *ngIf="item.itemValue!=null">
                                        <ng-container [ngSwitch]="item.type">     

                                            <ng-container *ngSwitchCase="'DropDown'">
                                                <div class="inp-container" style="margin:30px 4px 20px 0">
                                                    <label class="label-text"> {{item.displayName}}</label>
                                                    <select class="form-select w-100" name="{{item.name}}"
                                                        aria-label="Default select example"
                                                        (change)="GetItemValue($event , item)"
                                                        style="padding: 6px 5px;">
                                                        <ng-container *ngFor="let option of item.itemOptions">
                                                            <ng-container
                                                                *ngIf="item.itemValue==option.value">
                                                                <option value="{{option.value}}" selected>
                                                                    {{option.displayName}}</option>
                                                            </ng-container>
                                                            <ng-container
                                                                *ngIf="item.itemValue!=option.value">
                                                                <option value="{{option.value}}">
                                                                    {{option.displayName}}</option>
                                                            </ng-container>
                                                        </ng-container>
                                                    </select>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngSwitchCase="'Money'">
                                                <div class="dollar" style="padding-bottom: 30px; border-bottom: 2px solid #001831; border-width: thin;">
                                                    <label class="label-text"> {{item.displayName}}</label>
                                                    <input type="text" class="form-control inp-text"
                                                        [ngClass]="{'required': item.required == 1}"
                                                        name="{{item.name}}" (keydown)="numberCheck($event)"
                                                        (keyup)="CommaFormatted($event ,item);getTotal(container)"
                                                        [(ngModel)]="item.itemValue" />
                                                    <div style="display: flex; display: flex;justify-content: space-between;margin-top: 2px;">
                                                        <p *ngIf="item.required == 1"
                                                            style="color: #ef233c;">Please fill out this field</p>
                                                        <p *ngIf="item.message!='' && item.message!=null">
                                                            <i class="fas fa-info-circle" style="cursor: pointer;
                                                    font-size: 23px; margin-top: 1px; color: #8a8e91;"
                                                                (click)="showMessage(item)"></i>
                                                        </p>
                                                    </div>
                                                    <div *ngIf="item.showMessage">
                                                        <div class="card card-body mb-3"> {{item.message}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngSwitchCase="'SumLabel'">
                                                <label class="sum-title"
                                                    style="margin-left: 1px; margin-top: 20px; font-weight: 500; font-size: 19px; ">
                                                    {{item.displayName}} 
                                                    <span style="color: #000;font-weight: 200; margin-left: 5px;">
                                                        {{ item.itemValue | number}}</span>
                                                    <span
                                                        style="color: #000;font-weight: 200; margin-left: 5px;"
                                                        *ngIf="item.itemValue == null"> 0</span></label>
                                            </ng-container>

                                        </ng-container>
                                    </ng-container>
                                </ng-container>
                            </ng-container>
                        </div>
                    </ng-container>
                </ng-container>
                <ng-container >
                <ng-container *ngFor="let screen of GetActiveGroup()?.screens">
                    <ng-container  *ngFor="let container of screen.containers">
                        <div *ngIf="container.containerDisplay == 'Dynamic'" style="text-align: center;">
                        <p style="color: #00274f;text-decoration: underline; font-size: 19px; cursor: pointer; margin-top: 10px;"
                            (click)="AddNewItem()">Add New Item</p>
                        </div>
                    </ng-container>
                  </ng-container>
                </ng-container>
            </ng-container>
            <div style="display: flex; justify-content: center;" >
                <button class="btn btn-primary" (click)="SaveIntake()" style="margin-top: 25px;
                text-align: center;
                background-color: #2ecc71;
                border-color: #2ecc71;">Save</button>
            </div>
        </div>


        <div *ngIf="inTakeForm && !showAttach && !showPictures && GeneralIntake.ChangePath" class="col-12 py-3 change-path">
            <div style="display: flex; justify-content: space-between; margin-bottom: 30px;">
                <h4 style="font-size: 20px; font-weight: 700;">Please follow the instructions carefully, and make sure that you answer all 
                    of these questions before continuing.</h4>
                <button class="btn" style="color: #fff;background-color: #0d6efd; border-color: #0d6efd;" 
                (click)="CancelChangePath()">Revert</button>
            </div>
         
            <h2 style="letter-spacing: 2px;text-align: center;font-size: 36px;font-weight: 500;  ">{{activeScreen.title}}</h2>
            <p class="sub-info" style="text-align: center;" *ngIf="activeScreen?.subTitle!=null">{{activeScreen?.subTitle}}</p>
            <div class="line mb-3"> <span class="divider-center"></span> </div>
            <ng-container *ngFor="let container of activeScreen.containers">
                <ng-container [ngSwitch]="container.type">
                    <div class="col-md-4" style="margin: auto;">
                        <ng-container *ngSwitchCase="'Form'">
                            <ng-container *ngFor="let item of container.items">
                                <ng-container [ngSwitch]="item.type">
                                    <ng-container *ngSwitchCase="'Icons'">
                                        <div class="inp-container" style="margin:0 4px 20px 0">
                                            <label class="label-text"> {{item.displayName}}</label>
                                            
                                            <select readonly="readonly" class="form-select w-100"
                                                name="{{item.name}}" aria-label="Default select example"
                                                (change)="GetItemValue($event , item)"
                                                style="padding: 6px 5px;">

                          
                                                <option selected></option>

                                                <option *ngFor="let option of item.itemOptions"
                                                    value="{{option.id}}">{{option.displayName}}</option>
                                         
                                            </select>
                                   
                                        </div>
                                    </ng-container>

                                    <ng-container *ngSwitchCase="'Text'">
                                        <label class="label-text"> {{item.displayName}}</label>
                                        <input class="form-control inp-text " type="text"
                                            name="{{item.name}}" [(ngModel)]="item.itemValue">
                                    </ng-container>

                                    <ng-container *ngSwitchCase="'Address'">
                              
                                        <label class="label-text"> {{item.displayName}}</label>
                                        <input class="form-control inp-text " type="text"
                                            name="{{item.name}}" [(ngModel)]="item.itemValue"
                                       >
                                    </ng-container>

                                    <ng-container *ngSwitchCase="'State'">
                                        <label class="label-text"> {{item.displayName}}</label>
                                        <input class="form-control inp-text " type="text"
                                            name="{{item.name}}" [(ngModel)]="item.itemValue">
                                    </ng-container>

                                    <ng-container *ngSwitchCase="'City'">
                                        <label class="label-text"> {{item.displayName}}</label>
                                        <input class="form-control inp-text " type="text"
                                            name="{{item.name}}" [(ngModel)]="item.itemValue">
                                    </ng-container>

                                    <ng-container *ngSwitchCase="'Zip'">
                                        <label class="label-text"> {{item.displayName}}</label>
                                        <input class="form-control inp-text " type="text"
                                            name="{{item.name}}" [(ngModel)]="item.itemValue">
                                    </ng-container>

                                    <ng-container *ngSwitchCase="'TextArea'">
                                        <label class="label-text"> {{item.displayName}}</label>
                                        <textarea class="form-control" style="   margin: 0 4px 20px 0;"
                                            name="{{item.name}}" rows="8" [(ngModel)]="item.itemValue">
                                    </textarea>
                                    </ng-container>

                                    <ng-container *ngSwitchCase="'Money'">
                                        <div class="dollar">
                                            <label class="label-text"> {{item.displayName}}</label>
                                            <input type="text" class="form-control inp-text"
                                                name="{{item.name}}" (keydown)="numberCheck($event)"
                                                (keyup)="CommaFormatted($event ,item);getTotalChangePath(activeScreen)"
                                                [(ngModel)]="item.itemValue" />
                                        </div>
                                    </ng-container>

                                    <ng-container *ngSwitchCase="'NegativeMoney'">
                                        <div class="dollar">
                                            <label class="label-text"> {{item.displayName}}</label>
                                            <input type="text" class="form-control inp-text"
                                                name="{{item.name}}" (keydown)="numberCheck($event)"
                                                (keyup)="CommaFormatted($event ,item);getTotalChangePath(activeScreen)"
                                                [(ngModel)]="item.itemValue" />
                                        </div>
                                    </ng-container>

                                    <ng-container *ngSwitchCase="'Number'">
                                        <label class="label-text">{{item.displayName}}</label>
                                        <input class="form-control inp-text" type="text"
                                            name="{{item.name}}" (keydown)="numberCheck($event)"
                                            (keyup)="CommaFormatted($event ,item)"
                                            [(ngModel)]="item.itemValue" />
                                    </ng-container>

                         

                                    <ng-container *ngSwitchCase="'SumLabel'">
                                        <label class="sum-title"
                                            style="margin-left: 1px; margin-top: 20px; font-weight: 500; font-size: 19px; ">
                                            {{item.displayName}}<span style="color: #000;font-weight: 200; margin-left: 5px;">
                                                {{ item.itemValue | number}}</span>
                                            <span style="color: #000;font-weight: 200; margin-left: 5px;"
                                                *ngIf="item.itemValue == null"> 0</span></label>
                                    </ng-container>

                                    <ng-container *ngSwitchCase="'DropDown'">
                                        <div class="inp-container" style="margin:0 4px 20px 0">
                                            <label class="label-text"> {{item.displayName}}</label>
                                            <select class="form-select w-100" name="{{item.name}}"
                                                aria-label="Default select example"
                                                (change)="GetItemValue($event , item)"
                                                style="padding: 6px 5px;">
                                                <ng-container *ngFor="let option of item.itemOptions">
                                                    <ng-container *ngIf="item.itemValue==option.value">

                                                        <option value="{{option.value}}" selected>
                                                            {{option.value}}</option>
                                                    </ng-container>
                                                    <ng-container *ngIf="item.itemValue!=option.value">
                                                        <option value="{{option.value}}">{{option.value}}
                                                        </option>
                                                    </ng-container>
                                                </ng-container>
                                            </select>
                                        </div>
                                    </ng-container>

                                </ng-container>
                            </ng-container>
                        </ng-container>
                    </div>
                </ng-container>
               
            </ng-container>

            <ng-container  *ngFor="let container of activeScreen?.containers">
                <div *ngIf="container.containerDisplay == 'Dynamic'" style="text-align: center;">
                  <p style="color: #00274f;text-decoration: underline; font-size: 19px; cursor: pointer;"
                    (click)="AddNewItemChangePath(activeScreen.id)">Add New Item</p>
                </div>
              </ng-container>
   

            <div style="display: flex; justify-content: center; margin-top: 15px;">
                <button class="btn" *ngIf="activeScreen.displayOrder > 1 && prevScreen.length>0"
                    (click)="MoveToScreen(0)" style="border: none; outline: none; background-color: #0d6efd; color: #fff;">Prev</button>
                <button class="btn" style="margin-left: 10px; border: none; outline: none; background-color: #0d6efd;  color: #fff;"
                    *ngIf="activeScreen?.nextScreenId!=null"
                    (click)="MoveToScreen(activeScreen.nextScreenId)">Next</button>
                <button class="btn" style="margin-left: 10px; background-color: #0d6efd; color: #fff;"
                    *ngIf="activeScreen?.nextScreenId==null && finishForm"
                    (click)="SaveIntake(0)">Save</button>
            </div>

        </div>

        <!-- Start Files -->
        <!-- <div class="col-9 py-3" *ngIf="showAttach && !GeneralIntake.ChangePath">
            <h3 style="margin-bottom: 40px; letter-spacing: 1px;">Attachments</h3>
            <div>
            <ngx-file-drop dropZoneLabel="Drop files here" (onFileDrop)="DropFiles($event)"
                [dropZoneClassName]="'upload-background-image'" (onFileOver)="fileOver($event)"
                (onFileLeave)="fileLeave($event)">
                <ng-template ngx-file-drop-content-tmp let-openFileSelector="openFileSelector">
                    <span style="font-size: 20px; color: #2f3640; letter-spacing: 2px;"> Drag and drop a new
                        files here. </span>
                    <button type="button" class="btn btn-success ml-2"
                        style="border-radius: 5px; border-color: #2ed573;  background-color: #2ed573; padding: 5px 10px ; margin-left: 10px; "
                        (click)="openFileSelector()">Browse Files</button>
                </ng-template>
            </ngx-file-drop>
        </div>
             
                <div style="display: flex; flex-direction: column; margin-top: 30px;">
                    <div *ngFor="let file of GeneralIntake.Files" style="width: 100%;">
                            <div *ngIf="file.name!=null && hideAttachment" style="padding: 20px; border-bottom: 3px solid #dee2e6; display: flex;">
                                <i *ngIf="file.fileType == 'pdf'" class="far fa-file-pdf"
                                    style="font-size: 30px; color: #bb0706;"></i>
                                <i *ngIf="file.fileType == 'docx'" class="fas fa-file-word"
                                    style="font-size: 30px; color: #0f9d58;"></i>
                                <i *ngIf="file.fileType == 'xlsx'" class="fas fa-file-excel"
                                    style="font-size: 30px; color: #0f9d58;"></i>
                                <span style="margin-left: 10px;"> {{file.name}}
                                    <a download  href="http://40.76.123.27:8096/api/intake/downloadFile?fileId={{file.id}}"
                                        title="Download" style="color: #000000; margin-left: 10px; margin-top: 4px;"> 
                                        <i class="fas fa-download"></i></a>
                                </span>

                                <select [(ngModel)]="file.categoryId" (change)="UpdateFiles()"
                                    style="margin-left: auto;">
                                    <option *ngFor="let category of GeneralIntake.categories"
                                        [ngValue]="category.id"
                                        [attr.selected]=" file.categoryId == category.id ? true : null">
                                        {{category.name}}
                                    </option>
                                </select>
                            </div>
                        </div>
                </div>
                <div class="row">
                    <div *ngFor="let file of GeneralIntake.Files">    
                      <div *ngIf="file.name==null" style="display: flex; justify-content: space-between; margin: 10px 0;">   
                       <p style="font-size: 19px; ">- Please upload file having 
                        <span style="margin-left: 5px; font-weight: bold;"> ( {{getFileCategoryName(file.categoryId)}} ) </span>   </p>
                           <ngx-file-drop dropZoneLabel="Drop files here" (onFileDrop)="DropFiles($event ,file)"
                            [dropZoneClassName]="'upload-single-file'" (onFileOver)="fileOver($event)"
                            (onFileLeave)="fileLeave($event)">
                            <ng-template ngx-file-drop-content-tmp let-openFileSelector="openFileSelector">
                                
                                <button type="button" class="btn btn-success ml-2"   style="border-radius: 5px; border-color: #2ed573; 
                                     background-color: #2ed573; padding: 5px  ; margin-left: 10px; "
                                    (click)="openFileSelector()">Browse Files</button>
                            </ng-template>
                        </ngx-file-drop> 
                        <hr>
                    </div>
                    </div>
                </div>
        </div> -->
        <!-- End Files -->

        <!-- Start Images -->
        <!-- <div class="col-9 py-3" *ngIf="showPictures && !GeneralIntake.ChangePath">
            <h3 style="margin-bottom: 40px; letter-spacing: 1px;">Pictures</h3>
            <ngx-file-drop dropZoneLabel="Drop files here" (onFileDrop)="UploadImages($event)"
                [dropZoneClassName]="'upload-background-image'" (onFileOver)="fileOver($event)"
                (onFileLeave)="fileLeave($event)">
                <ng-template ngx-file-drop-content-tmp let-openFileSelector="openFileSelector">
                    <span style="font-size: 20px; color: #2f3640; letter-spacing: 2px;"> Drop Images Here
                    </span>
                    <button type="button" class="btn btn-success  "
                        style="border-radius: 5px; border-color: #2ed573;  background-color: #2ed573; padding: 5px 10px ; margin-left: 10px;"
                        (click)="openFileSelector()">Browse Images</button>
                </ng-template>
            </ngx-file-drop>

            <div class="row  mt-5">
                <div class="col-lg-4 col-md-4" *ngFor="let image of GeneralIntake.images">
                    <div class="venue-gallery">
                        <img src="http://40.76.123.27:8096/api/deal/Image?dealId={{IntakeId}}&image={{image}}" alt="">
                    </div>
                    <div style="padding: 10px;">
                        <i class="far fa-star" (click)="SetMainImg(image)" title="primary image"></i>
                    </div>
                </div>
            </div>
        </div> -->
        <!-- End Images -->

    </div>


</div>

<div class="container-fluid" style="padding: 2px 15px;background-color: #fff;color:#575962; border-top: 1px solid;">
    <div *ngIf="noIntakeValues" style="display: flex; margin-top: 9px; ">
        <h2 style="font-size: 28px;">This Deal Not have Intake Values</h2>
        <a href="http://intake.groundlease.co/hash?hash={{GeneralIntake?.hash}}" target="_blank" style="margin-left: 11px;
           margin-top: 7px; font-size: 23px; color: #ff5722;text-decoration: underline;">Go to the wizard</a>
    </div>
    <div *ngIf="GeneralIntake.DirectLink?.hash!=null" style="font-size: 15px; margin-block: 5px; margin-left: auto;order: 2;  ">
        <p>
            <textarea rows="1" cols="77" id="userinput" style="border: 1px solid rgb(112, 112, 112); border-radius: 5px; ">
http://intake.groundlease.co/hash?hash={{GeneralIntake.DirectLink?.hash}}</textarea>
                
<i class="far fa-copy" (click)="CopyText()"></i>

        </p>
     
    </div>

    <div style="display: flex; margin-top: 10px; margin-bottom: 5px; ">
        <h2 style="font-size: 28px;">Generate a link with expiration hours:</h2>
        <input type="text"
            style=" margin-left: 5px; width: 91px;border: 1px solid #838383;border-radius: 4px; height: 35px;"
            [(ngModel)]="GeneralIntake.ExpirationHours">
        <button class="generate" style="margin-left: 10px;" (click)="CreateLink()">Generate</button>
    </div>
  
 
</div>